<!DOCTYPE html>
<!--[if lt IE 9]><html class="no-js lt-ie9" lang="en" dir="ltr"><![endif]--><!--[if gt IE 8]><!-->
<html class="no-js" lang="en" dir="ltr">
<!--<![endif]-->
<head>
    <meta charset="utf-8" />
    <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
        wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
    <title>Drug Product Database</title>
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <!-- Meta data -->
    <meta name="dcterms.language" title="ISO639-2" content="eng" />
    <meta name="dcterms.title" content="Drug and health product inspections" />
    <meta name="description" content="Find the latest results from the Government's drug and health product inspections." />
    <meta name="dcterms.subject" title="scheme" content="" />
    <meta name="dcterms.creator" content="Government of Canada, Health Canada and the Public health Agency of Canada" />
    <meta name="dcterms.contributor" content="" />
    <meta name="dcterms.type" title="gctype" content="" />
    <meta name="dcterms.audience" title="gcaudience" content="" />
    <meta name="dcterms.issued" title="W3CDTF" content="2015-04-21" />
    <meta name="dcterms.modified" title="W3CDTF" content="2016-03-18" />
    <meta name="review_date" content="" />
    <meta name="meta_date" content="" />

    <!-- Load closure template scripts -->
    <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_22/cdts/compiled/soyutils.js"></script>
    <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_22/cdts/compiled/wet-en.js"></script>
    <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_22/cdts/compiled/plugins-en.js"></script>
    <!--<script type="text/javascript" src="./gcweb_4.0.22/wet-en.js"></script>
    <script type="text/javascript" src="./gcweb_4.0.22/plugins-en.js"></script>-->
    <!-- Load closure template scripts -->
    <noscript>
        <link rel="import" href="./StaticFallbackFiles/gcweb/refTop.html">
    </noscript>
    <!-- Write closure template -->
    <script type="text/javascript">
            document.write(wet.builder.refTop({
                cdnEnv: "prod"
            }));
    </script>

    <!-- Google Tag Manager DO NOT REMOVE OR MODIFY - NE PAS SUPPRIMER OU MODIFIER -->
    <script>dataLayer1 = [];</script>
    <!-- End Google Tag Manager -->
    <script src="./js/mdall.js"></script>
</head>

<body vocab="http://schema.org/" typeof="WebPage">
    <!-- Google Tag Manager DO NOT REMOVE OR MODIFY - NE PAS SUPPRIMER OU MODIFIER -->
    <noscript>
        <iframe title="Google Tag Manager" src="//www.googletagmanager.com/ns.html?id=GTM-TLGQ9K" height="0" width="0"
                style="display:none;visibility:hidden"></iframe>
    </noscript>
    <script>
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement

(s),dl=l!='dataLayer1'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})

(window,document,'script','dataLayer1','GTM-TLGQ9K');
    </script>
    <!-- End Google Tag Manager -->
    <div id="def-top">
        <!-- top-en.html-Start-->
        <link rel="import" href="./StaticFallbackFiles/gcweb/top-en.html">
        <!-- top-en.html-End-->
    </div>
    <!-- Write closure template -->
    <script type="text/javascript">
	var defTop = document.getElementById("def-top");
	var jsonbread = [{ title: "Home", href: "http://www.canada.ca/en/index.html" },
        { title: "Health", href: "http://healthycanadians.gc.ca/index-eng.php" },
        { title: "Drug and health products", href: "http://healthycanadians.gc.ca/drugs-products-medicaments-produits/index-eng.php" },
        { title: "Inspecting and monitoring drug and health products", href: "http://healthycanadians.gc.ca/drugs-products-medicaments-produits/inspecting-monitoring-inspection-controle/index-eng.php" },
        { title: "Drug and health product inspections", href: "http://healthycanadians.gc.ca/drugs-products-medicaments-produits/inspecting-monitoring-inspection-controle/inspections/index-eng.php" },
        { title: "Drug Product Database Search" }];

	//console.log(jsonbread);
	defTop.outerHTML = wet.builder.top({
	    cdnEnv: "prod",
	    search: true,
		lngLinks: [{
			lang: "en",
			href: "instruments-medicaux-resultat.html",
			text: "Français",
		}],
		showPreContent: true,
		breadcrumbs:jsonbread,
	});
    </script>
    <div class="container">
        <main role="main" property="mainContentOfPage" class="container">
            <h1 property="name" id="wb-cont">Search results summary</h1>

            <section class="panel panel-default">
                <header class="panel-heading">
                    <h2 class="panel-title" id="title">Search results</h2>
                </header>
                <div><a href="drug-product.html">New Search</a></div>
                <div class="panel-body">
                    <p id="subParam1">List of Returned Drug Products</p>
                    <p id="tableInfo"></p>
                    <table id="dpdTable" class="wb-tables table table-striped table-hover table-bordered">
                        <thead>
                            <tr class="active">
                                <th>Status</th>
                                <th>DIN</th>
                                <th>Company</th>
                                <th>Product</th>
                                <th>Class</th>
                                <th>PM<sup id="fn1-rf"><a class="fn-lnk" href="#fn1"><span class="wb-inv">See footnote</span>1</a></sup></th>
                                <th>Schedule</th>
                                <th>#<sup id="fn2-rf"><a class="fn-lnk" href="#fn2"><span class="wb-inv">See footnote</span>2</a></sup></th>
                                <th>A.I. Name<sup id="fn2-rf"><a class="fn-lnk" href="#fn2"><span class="wb-inv">See footnote</span>3</a></sup></th>
                                <th>Strength</th>
                        </thead>
                        <tbody id="tbodyMain"></tbody>
                    </table>
                </div>
            </section>

            <!-- prefooter-en.html-Start-->
            <div id="def-preFooter">
                <link rel="import" href="./StaticFallbackFiles/gcweb/prefooter-en.html">
            </div>
            <!-- prefooter-en.html-End-->
            <!-- Write closure template -->
            <script type="text/javascript">
                var defPreFooter = document.getElementById("def-preFooter");
                defPreFooter.outerHTML = wet.builder.preFooter({
                    cdnEnv: "prod",
                    dateModified: "2016-10-19",
                    showPostContent: true,
                    showShare: true,
                });
            </script>
        </main>
    </div>

    <!-- footer-en.html-Start-->
    <div id="def-footer">
        <link rel="import" href="./StaticFallbackFiles/gcweb/footer-en.html">
    </div>
    <!-- footer-en.html-End-->
    <!-- Write closure template -->
    <script type="text/javascript">
            var defFooter = document.getElementById("def-footer");
            defFooter.outerHTML = wet.builder.footer({
                cdnEnv: "prod",
                showFeatures: true,
            });
    </script>
    <!-- Write closure template -->
    <script type="text/javascript">
                document.write(wet.builder.refFooter({
                    cdnEnv: "prod"
                }));
    </script>


    <script src="./js/dhpr.js"></script>
    <!--[if lt IE 10 | !IE ]><!-->
    <script src="./js/jquery.xdomainrequest.min.js"></script>
    <!--<![endif]-->

    <script>
        var lang = "en";
        var pType = "dpd";
        var displayLength = 25;
        var displayStart = 1;

        $('#btnDownload').hide();
        $("a#langLink").attr('href', goDhprLangUrl(lang, pType));

        window["wb-tables"] = {
            "sServerMethod": "POST",
            "sPaginationType": "full_numbers",
            "ajax": {
                "url": goDhprUrl(lang, pType),
                "error": OnFail
            },
            "iDisplayLength": displayLength,
            //"iDeferLoading": 100,
            "order": [[3, "asc"]],
            "initComplete": function (settings, json) {
                console.log("settings2" + settings);
                console.log("aLengthMenu" + settings.aLengthMenu);
                console.log("fnRecordsTotal" + settings.fnRecordsTotal());
                console.log("iDisplayLength" + settings._iDisplayLength);
            },
            "columns": [
            { "data": "status_name", sDefaultContent: "" },
            {
                "data": null,
                "render": function (data, type, full) {
                    return '<a href=drug-product-detail.html?lang=en&linkID=' + data.drug_code + '>' + data.drug_identification_number + '</a>';
                }
            },
            { "data": "company_name", sDefaultContent: "" },
            { "data": "brand_name", sDefaultContent: "" },
            { "data": "class_name", sDefaultContent: "" },
            {
                "data": "pm_name",
                "render": function (data, type, full, meta) {
                    return formatedPM(data, lang);
                }
            },
            { "data": "schedule_name", sDefaultContent: "" },
            { "data": "number_of_ais", sDefaultContent: "" },
            { "data": "ai_name", sDefaultContent: "" },
            { "data": "ai_strength_and_dosage_text", sDefaultContent: "", "bSearchable": false, "bSortable": false }
            ]
        }
        

        $(".wb-tables").on("xhr.dt", function (e, settings, json, xhr) {
            var count = Object.keys(json.data).length;

            if (count > 0) {
                $('#btnDownload').show();
            }
            else {
                $('#btnDownload').hide();
            }

            $('#btnExcel').click(function () {
                ExportExcel(json, "DPDResult", true);
            });

            //Export json // "href": "data:application/json," + encodeURIComponent(JSON.stringify($(this).data().obj))
            $('#btnJson').click(function () {
                var arrData = typeof json != 'object' ? JSON.parse(json) : json;
                $("<a />", {
                    "download": "DPDResult.json",
                    "href": "data:application/json," + encodeURIComponent(JSON.stringify(json))
                }).appendTo("body")
              .click(function () {
                  $(this).remove()
              })[0].click()
            });

            //Export xml
            $('#btnXml').click(function () {
                var arrData = typeof json != 'object' ? JSON.parse(json.data) : json.data;
                var xml = json2xml(arrData, 'items');
                xml = '<?xml version="1.0" encoding="utf-8"?>' + xml;
                var data = "Application/octet-stream," + encodeURIComponent(xml);
                $("<a />", {
                    "download": "DPDResult.xml",
                    "href": "data:application/octet-stream," + encodeURIComponent(xml)
                }).appendTo("body")
              .click(function () {
                  $(this).remove()
              })[0].click()
            });
        });


    </script>
</body>
</html>